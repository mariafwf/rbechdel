<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Maria Figueiredo">

<title>Bechdel Test: An Analysis in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="analysis_files/libs/clipboard/clipboard.min.js"></script>
<script src="analysis_files/libs/quarto-html/quarto.js"></script>
<script src="analysis_files/libs/quarto-html/popper.min.js"></script>
<script src="analysis_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="analysis_files/libs/quarto-html/anchor.min.js"></script>
<link href="analysis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="analysis_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="analysis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="analysis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="analysis_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">1</span>  Introduction</a></li>
  <li><a href="#imports" id="toc-imports" class="nav-link" data-scroll-target="#imports"><span class="toc-section-number">2</span>  Imports</a></li>
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link" data-scroll-target="#data-cleaning"><span class="toc-section-number">3</span>  Data Cleaning</a></li>
  <li><a href="#bechdel-ratings" id="toc-bechdel-ratings" class="nav-link" data-scroll-target="#bechdel-ratings"><span class="toc-section-number">4</span>  Bechdel Ratings</a></li>
  <li><a href="#analysis-visualization" id="toc-analysis-visualization" class="nav-link" data-scroll-target="#analysis-visualization"><span class="toc-section-number">5</span>  Analysis &amp; Visualization</a>
  <ul class="collapse">
  <li><a href="#yearly-trends" id="toc-yearly-trends" class="nav-link" data-scroll-target="#yearly-trends"><span class="toc-section-number">5.1</span>  Yearly Trends</a></li>
  <li><a href="#subsetting" id="toc-subsetting" class="nav-link" data-scroll-target="#subsetting"><span class="toc-section-number">5.2</span>  Subsetting</a></li>
  <li><a href="#international-gross" id="toc-international-gross" class="nav-link" data-scroll-target="#international-gross"><span class="toc-section-number">5.3</span>  International Gross</a></li>
  <li><a href="#movie-genres" id="toc-movie-genres" class="nav-link" data-scroll-target="#movie-genres"><span class="toc-section-number">5.4</span>  Movie Genres</a></li>
  <li><a href="#joining-datasets" id="toc-joining-datasets" class="nav-link" data-scroll-target="#joining-datasets"><span class="toc-section-number">5.5</span>  Joining Datasets</a></li>
  </ul></li>
  <li><a href="#keywords-with-nlp" id="toc-keywords-with-nlp" class="nav-link" data-scroll-target="#keywords-with-nlp"><span class="toc-section-number">6</span>  Keywords (with NLP)</a>
  <ul class="collapse">
  <li><a href="#udpipe" id="toc-udpipe" class="nav-link" data-scroll-target="#udpipe"><span class="toc-section-number">6.1</span>  <code>udpipe</code></a></li>
  <li><a href="#morphological-features" id="toc-morphological-features" class="nav-link" data-scroll-target="#morphological-features"><span class="toc-section-number">6.2</span>  Morphological Features</a></li>
  <li><a href="#keyword-extraction" id="toc-keyword-extraction" class="nav-link" data-scroll-target="#keyword-extraction"><span class="toc-section-number">6.3</span>  Keyword Extraction</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="toc-section-number">7</span>  Conclusion</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Bechdel Test: An Analysis in R</h1>
<p class="subtitle lead">LING 343 WN23 Project 1</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Maria Figueiredo </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>The Bechdel Test is one of the most popular ways of measuring gender bias in movies. Its main idea comes from a 1985 strip by cartoonist Alison Bechdel. As part of her “Dykes To Watch Out” series, Bechdel wrote that a movie will only pass what she calls “The Rule” if it includes at least two named women who talk to each other about something other than a man. <code>movies.csv</code> is the main dataset used for this analysis and includes general information about movies from 1970 to 2013, as well as whether or not they pass the Bechdel Test. The dataset was extracted from the <a href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2021/2021-03-09">Tidy Tuesday</a> project.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="cartoon.jpeg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">The original cartoon by Alison Bechdel</figcaption><p></p>
</figure>
</div>
<p>NOTE: It is important to acknowledge that the Bechdel Test does not yet include a metric for bias against non-binary or gender non-confirming individuals. For the purpose of this analysis, we will be treating “men” and “women” as two binary categories, as they appear in the dataset, although the gender spectrum is a lot more complex that that.</p>
</section>
<section id="imports" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Imports</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>movies <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"movies.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-cleaning" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Data Cleaning</h1>
<p>We start the process by cleaning our dataset so that our analysis can flow more easily, without unnecessary variables getting in the way. Some columns such as <code>imdb_id</code>, <code>code</code>, <code>period_code</code>, and <code>decade_code</code> store more organizational variables that won’t necessarily be important when we look at relationships between more relevant variables. Other columns simply contain too much unique data. <code>actors</code>, for instance, includes names of all starring actors in a single cell. We can filter some of these columns out with the <code>subset()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>movies <span class="ot">&lt;-</span> movies <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(imdb_id, error, poster, type, awards,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                     imdb_votes, code, period_code, imdb,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>                     released, response, runtime, decade_code,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>                     actors, writer, director))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(movies)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,794
Columns: 18
$ year          &lt;int&gt; 2013, 2012, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 20…
$ title         &lt;chr&gt; "21 &amp;amp; Over", "Dredd 3D", "12 Years a Slave", "2 Guns…
$ test          &lt;chr&gt; "notalk", "ok-disagree", "notalk-disagree", "notalk", "m…
$ clean_test    &lt;chr&gt; "notalk", "ok", "notalk", "notalk", "men", "men", "notal…
$ binary        &lt;chr&gt; "FAIL", "PASS", "FAIL", "FAIL", "FAIL", "FAIL", "FAIL", …
$ budget        &lt;int&gt; 13000000, 45000000, 20000000, 61000000, 40000000, 225000…
$ domgross      &lt;chr&gt; "25682380", "13414714", "53107035", "75612460", "9502021…
$ intgross      &lt;chr&gt; "42195766", "40868994", "158607035", "132493015", "95020…
$ budget_2013   &lt;int&gt; 13000000, 45658735, 20000000, 61000000, 40000000, 225000…
$ domgross_2013 &lt;chr&gt; "25682380", "13611086", "53107035", "75612460", "9502021…
$ intgross_2013 &lt;chr&gt; "42195766", "41467257", "158607035", "132493015", "95020…
$ plot          &lt;chr&gt; NA, NA, "In the antebellum United States, Solomon Northu…
$ rated         &lt;chr&gt; NA, NA, "R", "R", "PG-13", "PG-13", "R", "R", "PG-13", "…
$ language      &lt;chr&gt; NA, NA, "English", "English, Spanish", "English", "Engli…
$ country       &lt;chr&gt; NA, NA, "USA, UK", "USA", "USA", "USA", "USA", "UK", "US…
$ metascore     &lt;int&gt; NA, NA, 97, 55, 62, 29, 28, 55, 48, 33, 90, 58, 52, 78, …
$ imdb_rating   &lt;dbl&gt; NA, NA, 8.3, 6.8, 7.6, 6.6, 5.4, 7.8, 5.7, 5.0, 7.5, 7.4…
$ genre         &lt;chr&gt; NA, NA, "Biography, Drama, History", "Action, Comedy, Cr…</code></pre>
</div>
</div>
<p>Additionally, some columns have many <code>N/A</code> values that might complicate our analysis later. We can get rid of those as well using <code>drop_na()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>movies <span class="ot">&lt;-</span> movies <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bechdel-ratings" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Bechdel Ratings</h1>
<p>The <code>clean_test</code> variable gives us the reasons why a certain movie failed the Bechdel Test. We use the <code>count()</code> function to extract all possible values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>movies <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(clean_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  clean_test   n
1    dubious 109
2        men 151
3     notalk 416
4    nowomen 111
5         ok 629</code></pre>
</div>
</div>
<p>Here, <code>nowomen</code> includes movies that have less than two women in them (rating <code>0</code>), <code>notalk</code> includes movies that have at least two women in them, but they don’t talk to each other (rating <code>1</code>), and <code>men</code> includes movies that have women that talk to each other, but only about men (rating <code>2</code>). The tag <code>dubious</code> is given to those movies that caused some skepticism about whether or not they pass the Test, but ultimately received the <code>FAIL</code> label. In contrast, <code>ok</code> denotes movies that met all three conditions and thus passed the Bechdel Test.</p>
<p>We can check the accuracy of those designations by cross-referencing them with the column <code>binary</code>, which reduces the classification to <code>PASS</code>/<code>FAIL</code> according to the Bechdel Test conditions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>movies <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_test) <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(binary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
# Groups:   clean_test [5]
  clean_test binary     n
  &lt;chr&gt;      &lt;chr&gt;  &lt;int&gt;
1 dubious    FAIL     109
2 men        FAIL     151
3 notalk     FAIL     416
4 nowomen    FAIL     111
5 ok         PASS     629</code></pre>
</div>
</div>
<p>While the labels certainly help us understand the reasons behind each failure, they are not the easiest data to work with. The <code>mutate()</code> function can help us convert the labels into numerical values within [<code>0</code>, <code>3</code>], according to the Bechdel rule. Since <code>dubious</code> does not fall into a specific category, we will convert it into an additional <code>-1</code> rating level for the time being. These values are then stored in a new column named <code>rating</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>movies[<span class="st">"rating"</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>movies <span class="ot">&lt;-</span> movies <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rating =</span> <span class="fu">case_when</span>(</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    clean_test <span class="sc">==</span> <span class="st">'dubious'</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    clean_test <span class="sc">==</span> <span class="st">'nowomen'</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    clean_test <span class="sc">==</span> <span class="st">'notalk'</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    clean_test <span class="sc">==</span> <span class="st">'men'</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    clean_test <span class="sc">==</span> <span class="st">'ok'</span> <span class="sc">~</span> <span class="dv">3</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(movies<span class="sc">$</span>clean_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:1416] "notalk" "notalk" "men" "men" "notalk" "ok" "ok" "notalk" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(movies<span class="sc">$</span>rating)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> num [1:1416] 1 1 2 2 1 3 3 1 3 3 ...</code></pre>
</div>
</div>
<p>For an added layer of organization, we can also categorize the ratings as different levels with the <code>as.factor()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>movies[<span class="st">"level"</span>] <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(movies<span class="sc">$</span>rating)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(movies<span class="sc">$</span>level)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 5 levels "-1","0","1","2",..: 3 3 4 4 3 5 5 3 5 5 ...</code></pre>
</div>
</div>
</section>
<section id="analysis-visualization" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Analysis &amp; Visualization</h1>
<p>Now that we have a clean dataset with only relevant columns, we can analyze general trends of the Bechdel Test as they relate to specific variables. At this point, we can already generate some interesting plots.</p>
<section id="yearly-trends" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="yearly-trends"><span class="header-section-number">5.1</span> Yearly Trends</h2>
<p>The next code chunk creates a bar chart that shows how the overall ratings for the Test changed over the analyzed years. This is one of the many relationships that can be explored using the information in the dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>movies <span class="sc">|&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">fill =</span> level)) <span class="sc">+</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"cornsilk2"</span>, <span class="st">"red2"</span>, <span class="st">"orange2"</span>, <span class="st">"yellow2"</span>, <span class="st">"green2"</span>)) <span class="sc">+</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Frequency of Ratings by Year"</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="subsetting" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="subsetting"><span class="header-section-number">5.2</span> Subsetting</h2>
<p>Furthermore, since we will be often looking at the different rating levels, it might be helpful to create separate sub-dataframes for each of them. We will leave the <code>dubious</code> movies out of our analysis, since it is not entirely defined. Similarly, we can create separate dataframes for <code>PASS</code> and <code>FAIL</code> groups of movies.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>bechdel_0 <span class="ot">&lt;-</span> <span class="fu">filter</span>(movies, level <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>bechdel_1 <span class="ot">&lt;-</span> <span class="fu">filter</span>(movies, level <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>bechdel_2 <span class="ot">&lt;-</span> <span class="fu">filter</span>(movies, level <span class="sc">==</span> <span class="dv">2</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>bechdel_3 <span class="ot">&lt;-</span> <span class="fu">filter</span>(movies, level <span class="sc">==</span> <span class="dv">3</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>bechdel_fail <span class="ot">&lt;-</span> <span class="fu">filter</span>(movies, binary <span class="sc">==</span> <span class="st">"FAIL"</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>bechdel_pass <span class="ot">&lt;-</span> <span class="fu">filter</span>(movies, binary <span class="sc">==</span> <span class="st">"PASS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="international-gross" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="international-gross"><span class="header-section-number">5.3</span> International Gross</h2>
<p>As an example, we can analyze possible correlations between a movie’s international gross, normalized to 2013, and its result on the Bechdel Test. In order to do so, one option would be to calculate the mean gross for each level of rating. Note that the international gross normalized to 2013 is represented in <code>movies</code> by the variable <code>intgross_2013</code>.</p>
<p>We first create a new dataset to store the ratings, as well as their respective gross mean values. Since the variable is not numeric in the original dataframe, we can convert it using <code>as.integer()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>intgross <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">rating =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">mean =</span> <span class="fu">c</span>(<span class="fu">mean</span>(<span class="fu">as.integer</span>(bechdel_0<span class="sc">$</span>intgross_2013), <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mean</span>(<span class="fu">as.integer</span>(bechdel_1<span class="sc">$</span>intgross_2013), <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mean</span>(<span class="fu">as.integer</span>(bechdel_2<span class="sc">$</span>intgross_2013), <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mean</span>(<span class="fu">as.integer</span>(bechdel_3<span class="sc">$</span>intgross_2013), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can plot these values with <code>ggplot()</code>. The graph below reveals that movies with at least two named women in them who do not talk to each other, receiving a rating of <code>1</code>, had the highest mean international gross value, followed by those that had no women characters, meaning they failed the Bechdel Test.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>intgross <span class="sc">|&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> rating, <span class="at">y =</span> mean)) <span class="sc">+</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"orchid"</span>, <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Mean International Gross by Rating"</span>,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">"Rating"</span>,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">"Mean International Gross"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Another way we can explore the relationship between the two variables is to look at the frequency of ratings for highest-grossing movies. A subset of size <code>n = 80</code> was chosen arbitrarily for this step. First, we use <code>order()</code> to sort the data in a descending order based on the <code>intgross_2013</code> variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>movies <span class="ot">&lt;-</span> movies[<span class="fu">order</span>(<span class="fu">as.integer</span>(movies<span class="sc">$</span>intgross_2013),</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, we extract the first 80 columns, or the 80 highest-grossing movies, with the help of the <code>head()</code> function. We can generate a density plot of each Bechdel rating using <code>ggplot()</code>’s <code>geom_density()</code>. Here, we observe that most of the highest-grossing movies in the dataset had a rating of <code>1</code> (women who don’t talk to each other), followed by <code>3</code> (passed the Test).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>movies <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">80</span>) <span class="sc">|&gt;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.integer</span>(rating))) <span class="sc">+</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"navyblue"</span>, <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 80 Movies - Density of Ratings"</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">"Rating"</span>,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">"Density"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="movie-genres" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="movie-genres"><span class="header-section-number">5.4</span> Movie Genres</h2>
<p>A further example of a relationship that can be analyzed is that between the genre of a movie and its <code>PASS</code>/<code>FAIL</code> Bechdel designation. When trying to extract the values for genre, we run into a problem. Some movies fall into multiple genre categories and have therefore more than a single one listed in their <code>genre</code> column. There are multiple ways to approach this situation. The easiest option would be to only look at the first value. However, the genres are listed in alphabetical order, with no actual levels of “importance.” Thus, ignoring the rest would not be representative of all genres.</p>
<p>In this case, <code>str_split_i()</code> can come in handy. The function allows us to split a string into multiple pieces. The names in the <code>genre</code> column are separated by a simple comma (<code>,</code>), which serves as our <code>pattern</code> parameter. We can split the <code>genre</code> string into 3 values, since 3 is the maximum number of genres listed, and instead add them to separate columns <code>genre_1</code>, <code>genre_2</code>, and <code>genre_3</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>movies[<span class="st">'genre_1'</span>] <span class="ot">&lt;-</span> <span class="st">'NA'</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>movies[<span class="st">'genre_2'</span>] <span class="ot">&lt;-</span> <span class="st">'NA'</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>movies[<span class="st">'genre_3'</span>] <span class="ot">&lt;-</span> <span class="st">'NA'</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(movies)) {</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  movies[i, <span class="st">'genre_1'</span>] <span class="ot">&lt;-</span> <span class="fu">str_split_i</span>(movies[i, <span class="st">"genre"</span>], <span class="st">", "</span>, <span class="dv">1</span>)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  movies[i, <span class="st">'genre_2'</span>] <span class="ot">&lt;-</span> <span class="fu">str_split_i</span>(movies[i, <span class="st">"genre"</span>], <span class="st">", "</span>, <span class="dv">2</span>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  movies[i, <span class="st">'genre_3'</span>] <span class="ot">&lt;-</span> <span class="fu">str_split_i</span>(movies[i, <span class="st">"genre"</span>], <span class="st">", "</span>, <span class="dv">3</span>)</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(movies<span class="sc">$</span>genre_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:1416] "Horror" "Adventure" "Adventure" "Action" "Animation" "Crime" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(movies<span class="sc">$</span>genre_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:1416] NA "Horror" "Sci-Fi" "Adventure" "Adventure" "Drama" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(movies<span class="sc">$</span>genre_3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:1416] NA "Thriller" NA "Sci-Fi" "Drama" NA "Fantasy" "Fantasy" NA ...</code></pre>
</div>
</div>
<p>At this point, we have listed all genres separately, in different columns. Still, it would be more helpful for the purpose of our analysis to put all of those names in a single column, i.e.&nbsp;make the dataframe “longer”. We can easily achieve this with <code>pivot_longer()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>movies <span class="ot">&lt;-</span> movies <span class="sc">|&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">'genre_1'</span>, <span class="st">'genre_2'</span>, <span class="st">'genre_3'</span>),</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">'genre_labels'</span>,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">'genres'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(movies<span class="sc">$</span>genres)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:4248] "Horror" NA NA "Adventure" "Horror" "Thriller" "Adventure" ...</code></pre>
</div>
</div>
<p>Notice here that some rows still contain <code>N/A</code> values, since not all movies have three different genres. Again, we can ignore those values. Likewise, we won’t be needing our <code>genre_labels</code> column, so we can filter that out as well.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>movies <span class="ot">&lt;-</span> movies <span class="sc">|&gt;</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(genre_labels))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We then create a new dataframe to store the different genres and their respective <code>PASS</code> and <code>FAIL</code> frequencies.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>all_genres <span class="ot">&lt;-</span> movies <span class="sc">|&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(genres) <span class="sc">|&gt;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(binary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(all_genres)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 42
Columns: 3
Groups: genres [21]
$ genres &lt;chr&gt; "Action", "Action", "Adventure", "Adventure", "Animation", "Ani…
$ binary &lt;chr&gt; "FAIL", "PASS", "FAIL", "PASS", "FAIL", "PASS", "FAIL", "PASS",…
$ n      &lt;int&gt; 280, 114, 222, 102, 68, 30, 42, 33, 243, 247, 162, 70, 3, 1, 33…</code></pre>
</div>
</div>
<p>Now that we have isolated our relevant values, we are ready to plot them. In order to make our graph more legible, we use <code>filter()</code> to show only some of the most common movie genres: <strong>action</strong>, <strong>adventure</strong>, <strong>comedy</strong>, <strong>crime</strong>, <strong>romance</strong>, <strong>sci-fi</strong>, and <strong>thriller</strong>. We can see, for example, that the only genres in which <code>PASS</code> is more frequent than <code>FAIL</code> are <strong>comedy</strong> and <strong>romance</strong>. The other selected genres are represented in its majority by more movies that fail the Bechdel Test, with the disparity being noticeably larger in genres like <strong>action</strong> and <strong>adventure</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>all_genres <span class="sc">|&gt;</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(genres <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Action"</span>, <span class="st">"Adventure"</span>,</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>                       <span class="st">"Comedy"</span>, <span class="st">"Crime"</span>, <span class="st">"Romance"</span>,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>                       <span class="st">"Sci-Fi"</span>, <span class="st">"Thriller"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> binary, <span class="at">x =</span> genres, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"red2"</span>, <span class="st">"green2"</span>)) <span class="sc">+</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"PASS/FAIL Trends by Movie Genre"</span>,</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Genre"</span>,</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="joining-datasets" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="joining-datasets"><span class="header-section-number">5.5</span> Joining Datasets</h2>
<p>As we have seen before with the existence of a <code>dubious</code> label, the Bechdel Test is not always a consensus between viewers. That is because they might have different notions of what it means for a movie to have a woman with a significant enough role to be factored into the Test, or there might be nuances to a conversation between women that viewers may or may not classify as “about a a man.” In order to explore this variation even further, we will import <code>raw_bechdel.csv</code>, a different dataset (sourced via the <a href="bechdeltest.com">Bechdel Test API</a>) that includes information about movies from 1970 to 2020.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>raw_bechdel <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"raw_bechdel.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For the sake of simplicity, let’s assume that rows where the <code>title</code> and <code>year</code> variables are the same in both datasets refer to the same movie. We can join the dataframes by <code>title</code> with <code>left_join()</code>, then select the row duplicates that have the same <code>year</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>joined <span class="ot">&lt;-</span> movies <span class="sc">|&gt;</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(raw_bechdel, <span class="at">by =</span> <span class="st">"title"</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year.x <span class="sc">==</span> year.y) <span class="sc">|&gt;</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"year"</span> <span class="ot">=</span> <span class="st">`</span><span class="at">year.x</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using the <code>sum()</code> function, we observe that the ratings given to overlapping movies in both datasets are the same in 3184 occasions. In contrast, they are not the same in 455 occasions, 444 of them being cases where the rating in <code>raw_bechdel</code> is greater than that in <code>movies</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(joined<span class="sc">$</span>rating.x <span class="sc">==</span> joined<span class="sc">$</span>rating.y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3184</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(joined<span class="sc">$</span>rating.x <span class="sc">!=</span> joined<span class="sc">$</span>rating.y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 455</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(joined<span class="sc">$</span>rating.x <span class="sc">&lt;</span> joined<span class="sc">$</span>rating.y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 444</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(joined<span class="sc">$</span>rating.x <span class="sc">&gt;</span> joined<span class="sc">$</span>rating.y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11</code></pre>
</div>
</div>
</section>
</section>
<section id="keywords-with-nlp" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Keywords (with NLP)</h1>
<section id="udpipe" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="udpipe"><span class="header-section-number">6.1</span> <code>udpipe</code></h2>
<p>This next section utilizes the <code>udpipe</code> package, an open-source tool for Natural Language Processing, including tokenization, raw text parsing, and tagging. A complete documentation can be found <a href="https://bnosac.github.io/udpipe/docs/doc0.html">here</a>. We are interested in investigating whether some keywords are more frequent than others in movies that pass or fail the Bechdel Test.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(udpipe)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>udmodel <span class="ot">&lt;-</span> <span class="fu">udpipe_download_model</span>(<span class="at">language =</span> <span class="st">"english"</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>udmodel <span class="ot">&lt;-</span> <span class="fu">udpipe_load_model</span>(<span class="at">file =</span> udmodel<span class="sc">$</span>file_model)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>plots <span class="ot">&lt;-</span> <span class="fu">udpipe_annotate</span>(udmodel, movies<span class="sc">$</span>plot)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>plots <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(plots)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(plots)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 109,045
Columns: 14
$ doc_id        &lt;chr&gt; "doc1", "doc1", "doc1", "doc1", "doc1", "doc1", "doc1", …
$ paragraph_id  &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
$ sentence_id   &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
$ sentence      &lt;chr&gt; "When a teenage girl is possessed by a mysterious entity…
$ token_id      &lt;chr&gt; "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11",…
$ token         &lt;chr&gt; "When", "a", "teenage", "girl", "is", "possessed", "by",…
$ lemma         &lt;chr&gt; "when", "a", "teenage", "girl", "be", "possess", "by", "…
$ upos          &lt;chr&gt; "ADV", "DET", "NOUN", "NOUN", "AUX", "VERB", "ADP", "DET…
$ xpos          &lt;chr&gt; "WRB", "DT", "NN", "NN", "VBZ", "VBN", "IN", "DT", "JJ",…
$ feats         &lt;chr&gt; "PronType=Int", "Definite=Ind|PronType=Art", "Number=Sin…
$ head_token_id &lt;chr&gt; "6", "4", "4", "6", "6", "14", "10", "10", "10", "6", "1…
$ dep_rel       &lt;chr&gt; "mark", "det", "compound", "nsubj:pass", "aux:pass", "ad…
$ deps          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ misc          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, "SpaceAfter=No", NA,…</code></pre>
</div>
</div>
</section>
<section id="morphological-features" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="morphological-features"><span class="header-section-number">6.2</span> Morphological Features</h2>
<p>Here, some variables might be of interest when dealing with the linguistic aspect of plot descriptions. For example, the <code>upos</code> tag represents the universal part-of-speech label of a single word, or the abstract lexical category associated with it, such as <code>ADJ</code>, <code>NOUN</code>, or <code>VERB</code>. We can use the <code>txt_freq()</code> function to compute the most occurring categories in plot descriptions for the entire dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>upos_freq <span class="ot">&lt;-</span> <span class="fu">txt_freq</span>(plots<span class="sc">$</span>upos)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>upos_freq<span class="sc">$</span>key <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(upos_freq<span class="sc">$</span>key)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(upos_freq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 17
Columns: 3
$ key      &lt;fct&gt; NOUN, DET, VERB, ADP, PUNCT, ADJ, PROPN, PRON, PART, ADV, AUX…
$ freq     &lt;int&gt; 25017, 12161, 12042, 11948, 10165, 8308, 7453, 7126, 3225, 30…
$ freq_pct &lt;dbl&gt; 22.94190472, 11.15227658, 11.04314732, 10.95694438, 9.3218396…</code></pre>
</div>
</div>
<p>Another important tag is <code>lemma</code>, which contains the canonical (base) form of the word, or the form typically found in dictionaries. This helps us to “normalize” words with similar semantic contents into a single form. Once we understand what these tags represent, we can then them to explore certain trends in the occurrence of specific word types. For instance, we can compute and plot the most frequent nouns in plot descriptions of movies that failed or passed the Bechdel Test, represented by our <code>bechdel_fail</code> and <code>bechdel_pass</code> dataframes, respectively.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>plots_fail <span class="ot">&lt;-</span> <span class="fu">udpipe_annotate</span>(udmodel, bechdel_fail<span class="sc">$</span>plot)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>plots_fail <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(plots_fail)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>nouns_fail <span class="ot">&lt;-</span> <span class="fu">subset</span>(plots_fail, upos <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"NOUN"</span>)) </span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>nouns_fail <span class="ot">&lt;-</span> <span class="fu">txt_freq</span>(nouns_fail<span class="sc">$</span>lemma)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>nouns_fail<span class="sc">$</span>key <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(nouns_fail<span class="sc">$</span>key)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(nouns_fail)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,975
Columns: 3
$ key      &lt;fct&gt; man, life, world, year, story, friend, woman, group, family, …
$ freq     &lt;int&gt; 97, 82, 51, 49, 48, 44, 41, 36, 35, 35, 33, 33, 32, 30, 30, 2…
$ freq_pct &lt;dbl&gt; 1.7962963, 1.5185185, 0.9444444, 0.9074074, 0.8888889, 0.8148…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>plots_pass <span class="ot">&lt;-</span> <span class="fu">udpipe_annotate</span>(udmodel, bechdel_pass<span class="sc">$</span>plot)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>plots_pass <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(plots_pass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>nouns_pass <span class="ot">&lt;-</span> <span class="fu">subset</span>(plots_pass, upos <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"NOUN"</span>)) </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>nouns_pass <span class="ot">&lt;-</span> <span class="fu">txt_freq</span>(nouns_pass<span class="sc">$</span>lemma)</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>nouns_pass<span class="sc">$</span>key <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(nouns_pass<span class="sc">$</span>key)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(nouns_pass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,639
Columns: 3
$ key      &lt;fct&gt; life, woman, girl, family, man, school, year, friend, world, …
$ freq     &lt;int&gt; 89, 86, 64, 56, 49, 46, 46, 46, 42, 34, 32, 31, 28, 28, 27, 2…
$ freq_pct &lt;dbl&gt; 2.0422212, 1.9733823, 1.4685636, 1.2849931, 1.1243690, 1.0555…</code></pre>
</div>
</div>
<p>We plot the noun frequencies for each case with <code>ggplot()</code>. The function <code>grid.arrange()</code> from the <code>gridExtra</code> package can be used to arrange them side by side.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>ggp1 <span class="ot">&lt;-</span> nouns_fail <span class="sc">|&gt;</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">|&gt;</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(key, freq), <span class="at">y =</span> freq)) <span class="sc">+</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"turquoise3"</span>, <span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"FAIL - Nouns"</span>,</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Noun"</span>,</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>ggp2 <span class="ot">&lt;-</span> nouns_pass <span class="sc">|&gt;</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">|&gt;</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(key, freq), <span class="at">y =</span> freq)) <span class="sc">+</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"orange2"</span>, <span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"PASS - Nouns"</span>,</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Noun"</span>,</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(ggp1, ggp2, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="keyword-extraction" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="keyword-extraction"><span class="header-section-number">6.3</span> Keyword Extraction</h2>
<p>While these two plots already reveal some interesting patters in the groups of nouns that appear most frequently in <code>PASS</code> and <code>FAIL</code> movies, a noun without surrounding context might not be enough to draw any concrete conclusions. This is where RAKE comes in. <a href="https://csurfer.github.io/rake-nltk/_build/html/index.html">RAKE (Rapid Automatic Keyword Extraction)</a> is an efficient unsupervised Machine Learning algorithm for keyword extraction. It is rooted in the notion that keywords often contain multiple words and very few words with minimum lexical meaning, such as standard punctuation or stop words. The algorithm recognizes word frequencies and relative degrees, using that information to ultimately identify content words, as well as key phrases.</p>
<p>The next code chunk executes a sample keyword extraction with <code>keywords_rake()</code> for the entire <code>movies</code> dataset and plots the 30 most frequent keywords in a flipped bar chart.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>keywords <span class="ot">&lt;-</span> <span class="fu">keywords_rake</span>(<span class="at">x =</span> plots, <span class="at">term =</span> <span class="st">"lemma"</span>, <span class="at">group =</span> <span class="st">"doc_id"</span>, </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">relevant =</span> plots<span class="sc">$</span>upos <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"NOUN"</span>, <span class="st">"ADJ"</span>))</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>keywords<span class="sc">$</span>key <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(keywords<span class="sc">$</span>keyword)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>keywords <span class="sc">|&gt;</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">30</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(key, rake), <span class="at">y =</span> rake)) <span class="sc">+</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"mediumpurple"</span>, <span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Most Frequent Keywords"</span>,</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Keyword"</span>,</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The function <code>as_phrasemachine()</code> coverts <code>upos</code> labels to one-letter tags (i.e.&nbsp;A for adjectives), which can then be combined into POS sequences. This allows noun phrases, for example, to be identified by the regex <code>(A|N)*N(P+D*(A|N)*N)*</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>plots[<span class="st">"phrase_tag"</span>] <span class="ot">&lt;-</span> <span class="fu">as_phrasemachine</span>(plots<span class="sc">$</span>upos, <span class="at">type =</span> <span class="st">"upos"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We then can plot the most frequent noun phrases out of the <code>movies</code> plot keywords.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>noun_phrases <span class="ot">&lt;-</span> <span class="fu">keywords_phrases</span>(<span class="at">x =</span> plots<span class="sc">$</span>phrase_tag, <span class="at">term =</span> <span class="fu">tolower</span>(plots<span class="sc">$</span>token), </span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">pattern =</span> <span class="st">"(A|N)*N(P+D*(A|N)*N)*"</span>, </span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">is_regex =</span> <span class="cn">TRUE</span>, <span class="at">detailed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>noun_phrases <span class="ot">&lt;-</span> <span class="fu">subset</span>(noun_phrases, ngram <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> freq <span class="sc">&gt;</span> <span class="dv">3</span>)</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>noun_phrases<span class="sc">$</span>key <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(noun_phrases<span class="sc">$</span>keyword)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>noun_phrases <span class="sc">|&gt;</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">|&gt;</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(key, freq), <span class="at">y =</span> freq)) <span class="sc">+</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"seagreen"</span>, <span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Most Frequent NP Keywords"</span>,</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"NP Keyword"</span>,</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Similarly to what was done before for nouns, we can plot two different graphs for <code>PASS</code> and <code>FAIL</code> side-by-side, this time with the most frequent noun phrases.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>plots_fail[<span class="st">"phrase_tag"</span>] <span class="ot">&lt;-</span> <span class="fu">as_phrasemachine</span>(plots_fail<span class="sc">$</span>upos, <span class="at">type =</span> <span class="st">"upos"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>noun_phrases_fail <span class="ot">&lt;-</span> <span class="fu">keywords_phrases</span>(<span class="at">x =</span> plots_fail<span class="sc">$</span>phrase_tag, <span class="at">term =</span> <span class="fu">tolower</span>(plots_fail<span class="sc">$</span>token), </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">pattern =</span> <span class="st">"(A|N)*N(P+D*(A|N)*N)*"</span>, </span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">is_regex =</span> <span class="cn">TRUE</span>, <span class="at">detailed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>noun_phrases_fail <span class="ot">&lt;-</span> <span class="fu">subset</span>(noun_phrases_fail, ngram <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> freq <span class="sc">&gt;</span> <span class="dv">3</span>)</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>noun_phrases_fail<span class="sc">$</span>key <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(noun_phrases_fail<span class="sc">$</span>keyword)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>ggp1 <span class="ot">&lt;-</span> noun_phrases_fail <span class="sc">|&gt;</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">30</span>) <span class="sc">|&gt;</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(key, freq), <span class="at">y =</span> freq)) <span class="sc">+</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"turquoise"</span>, <span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"FAIL - NP Keywords"</span>,</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"NP Keyword"</span>,</span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>plots_pass[<span class="st">"phrase_tag"</span>] <span class="ot">&lt;-</span> <span class="fu">as_phrasemachine</span>(plots_pass<span class="sc">$</span>upos, <span class="at">type =</span> <span class="st">"upos"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>noun_phrases_pass <span class="ot">&lt;-</span> <span class="fu">keywords_phrases</span>(<span class="at">x =</span> plots_pass<span class="sc">$</span>phrase_tag, <span class="at">term =</span> <span class="fu">tolower</span>(plots_pass<span class="sc">$</span>token), </span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">pattern =</span> <span class="st">"(A|N)*N(P+D*(A|N)*N)*"</span>, </span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">is_regex =</span> <span class="cn">TRUE</span>, <span class="at">detailed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>noun_phrases_pass <span class="ot">&lt;-</span> <span class="fu">subset</span>(noun_phrases_pass, ngram <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> freq <span class="sc">&gt;</span> <span class="dv">3</span>)</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>noun_phrases_pass<span class="sc">$</span>key <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(noun_phrases_pass<span class="sc">$</span>keyword)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>ggp2 <span class="ot">&lt;-</span> noun_phrases_pass <span class="sc">|&gt;</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">30</span>) <span class="sc">|&gt;</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(key, freq), <span class="at">y =</span> freq)) <span class="sc">+</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"orange2"</span>, <span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"PASS - NP Keywords"</span>,</span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"NP Keyword"</span>,</span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(ggp1, ggp2, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="conclusion" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Conclusion</h1>
<p>Overall, there are numerous different ways in which the <code>movies</code> dataset can be further explored, but the generated plots uncover some interesting correlations. For instance, plot descriptions of movies that fail the Bechdel Test often include key phrases that start with the possessive pronoun “his,” along with phrases like “world war”, “serial killer,” “fbi agent,” and “alien race,” which relate to themes commonly associated with men and masculinity. In contrast, the most frequent keyword for movies that pass the Bechdel Test is “young woman” (after “new york”), followed by terms such as “high school,” “small town,” and “best friend.” These findings are also consistent with those from the the “PASS/FAIL Trends by Movie Genre” graph shown earlier.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>